<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Core Histogram Helpers: HistUtils.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Core Histogram Helpers
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">HistUtils.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="HistUtils_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// -*- c++ -*-</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#ifndef HISTUTILS_H</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#define HISTUTILS_H</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;TH1D.h&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;TH2D.h&gt;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;TGraph.h&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;TGraphAsymmErrors.h&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;TLine.h&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;TBox.h&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;TLatex.h&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;TMath.h&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;TColor.h&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;TString.h&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// Histogram Analysis Uitlities //</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html">   27</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceHistUtils.html">HistUtils</a> {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  </div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="comment">// Enumerator indicating requested variable //</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae0759b6d55043d68f3704e920af7c8a1">   33</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110">Stats</a> { <a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae57ec394e887bc7762c6476186d7eaf8">Mean</a>=0x11, <a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110abf140a74893a9708698f76a4ee416789">Median</a>=0x12, <a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110a1058d6eb74658ec382948203fe444f2e">RMS</a>=0x21, <a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae0759b6d55043d68f3704e920af7c8a1">Unknown</a>=0x00 };</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="comment">// Cache for enumerator lookup //</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#aa3bb9be93085f86cfa38e98f525f525b">   39</a></span>&#160;  <span class="keyword">static</span> std::map&lt;int,std::string&gt; <a class="code" href="namespaceHistUtils.html#aa3bb9be93085f86cfa38e98f525f525b">stats_lu</a> = std::map&lt;int,std::string&gt;();</div><div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#a763ef83bda6c72effba6b89023f6ed51">   40</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> std::map&lt;int,std::string&gt;&amp; <a class="code" href="namespaceHistUtils.html#a763ef83bda6c72effba6b89023f6ed51">fstats</a>() {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">if</span> ( stats_lu.empty() ) { </div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;      stats_lu[(int)<a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae57ec394e887bc7762c6476186d7eaf8">Mean</a>]    = <span class="stringliteral">&quot;Mean&quot;</span>;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      stats_lu[(int)<a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110abf140a74893a9708698f76a4ee416789">Median</a>]  = <span class="stringliteral">&quot;Median&quot;</span>;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;      stats_lu[(int)<a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110a1058d6eb74658ec382948203fe444f2e">RMS</a>]     = <span class="stringliteral">&quot;RMS&quot;</span>;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      stats_lu[(int)<a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae0759b6d55043d68f3704e920af7c8a1">Unknown</a>] = <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    }</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceHistUtils.html#aa3bb9be93085f86cfa38e98f525f525b">stats_lu</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  }</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// Lookup enumerator -&gt; name //</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// returns &quot;Unknown&quot; if enumrator value not found (casted as integer)</span></div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#abdbe4f180f6fd3236fd6f8ceb9166862">   55</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> std::string&amp; <a class="code" href="namespaceHistUtils.html#abdbe4f180f6fd3236fd6f8ceb9166862">lookupStats</a>(<a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110">Stats</a> s) {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">const</span> std::map&lt;int,std::string&gt;&amp; lmap = <a class="code" href="namespaceHistUtils.html#a763ef83bda6c72effba6b89023f6ed51">fstats</a>();</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    std::map&lt;int,std::string&gt;::const_iterator fmap(lmap.find((<span class="keywordtype">int</span>)s));</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">if</span> ( fmap == <a class="code" href="namespaceHistUtils.html#a763ef83bda6c72effba6b89023f6ed51">fstats</a>().end() ) { fmap = lmap.find((<span class="keywordtype">int</span>)<a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae0759b6d55043d68f3704e920af7c8a1">Unknown</a>); }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">return</span> fmap-&gt;second;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  }</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="comment">// Get mean, median, or rms with symmetric error //</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="comment">// Calculates the requested variable and the associated statistical uncertainty.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// Default calculation is &quot;Mean&quot;.</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">// Returns &quot;true&quot; if everything is ok, together with the requested value in &quot;m&quot; and error in &quot;dm&quot;.</span></div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#a75d5e50c598254d5415d2b2e1919eae9">   69</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceHistUtils.html#a75d5e50c598254d5415d2b2e1919eae9">stats</a>(TH1D* h,<span class="keywordtype">double</span>&amp; m,<span class="keywordtype">double</span>&amp; dm,<a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110">Stats</a> s=<a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae57ec394e887bc7762c6476186d7eaf8">Mean</a>)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordtype">bool</span> rf(<span class="keyword">false</span>);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordtype">double</span> w(0.);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">double</span> prob(0.5);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">switch</span> (s) </div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae57ec394e887bc7762c6476186d7eaf8">Mean</a>:</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    m  = h-&gt;GetMean();</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    dm = h-&gt;GetMeanError();</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    rf = <span class="keyword">true</span>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110abf140a74893a9708698f76a4ee416789">Median</a>:</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    h-&gt;ComputeIntegral();</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    h-&gt;GetQuantiles(1,&amp;m,&amp;prob);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    dm = 0.;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i(1); i&lt;=h-&gt;GetNbinsX(); ++i ) { </div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordtype">double</span> x(h-&gt;GetBinCenter(i));</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keywordtype">double</span> y(h-&gt;GetBinContent(i));</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      dm += y*(x-m)*(x-m);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      w  += y;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    rf = w &gt; 0.;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    dm = rf ? sqrt(dm/w) : 0.;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110a1058d6eb74658ec382948203fe444f2e">RMS</a>:</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    m  = h-&gt;GetRMS();</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    dm = h-&gt;GetRMSError();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    rf = <span class="keyword">true</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      }</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> rf;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// Get mean and median with asymmetric errors //</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// Calculates the requested variable and the associated statistical uncertainty.</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// Only implemented calculations are &quot;Median&quot; and &quot;Mean&quot;, with default &quot;Mean&quot;.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// Returns &quot;true&quot; if everything is ok, together with the requested value in &quot;m&quot;, the down error in &quot;dl&quot;, and the up error in &quot;dh&quot;.</span></div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#a0ae5e8fb9c5a958bacd0827d3d05a7bf">  113</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceHistUtils.html#a75d5e50c598254d5415d2b2e1919eae9">stats</a>(TH1D* h,<span class="keywordtype">double</span>&amp; m,<span class="keywordtype">double</span>&amp; dl,<span class="keywordtype">double</span>&amp; dh,<a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110">Stats</a> s=<a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae57ec394e887bc7762c6476186d7eaf8">Mean</a>)</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">bool</span> rf(<span class="keyword">false</span>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">double</span> prob(0.5);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">switch</span> (s)</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae57ec394e887bc7762c6476186d7eaf8">Mean</a>:</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    m  = h-&gt;GetMean();</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    rf = <span class="keyword">true</span>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110abf140a74893a9708698f76a4ee416789">Median</a>:</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    h-&gt;ComputeIntegral();</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    h-&gt;GetQuantiles(1,&amp;m,&amp;prob);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    rf = <span class="keyword">true</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// </span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> ( rf ) { </div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      dl = 0.;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      dh = 0.;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordtype">double</span> wl(0.);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keywordtype">double</span> wh(0.);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> ib(1); ib&lt;=h-&gt;GetNbinsX(); ++ib ) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">double</span> x(h-&gt;GetBinCenter(ib));</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">double</span> dx(x-m);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordtype">double</span> y(h-&gt;GetBinContent(ib));</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> ( x &lt; m ) { </div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      dl += y*dx*dx; wl += y; </div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      dh += y*dx*dx; wh += y; </div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">if</span> ( wl &gt; 0. ) { </div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    dl = TMath::Sqrt(TMath::Abs(dl)/wl);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      } <span class="keywordflow">else</span> { </div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    dl = 0.; </div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="keywordflow">if</span> ( wh &gt; 0. ) { </div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    dh = TMath::Sqrt(TMath::Abs(dh)/wh);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      } <span class="keywordflow">else</span> { </div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    dh = 0.; </div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> rf;      </div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">// Get list of projections (as list of 1-dim histograms) //</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">// Returns vector filled with valid pointers to TH1D histogram objects. </span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">// Needs a name and an axis indicator (1 - x,2 - y) for the projections.</span></div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#a383a62e11470b0d24d33f2c464b72f59">  167</a></span>&#160;  <span class="keyword">static</span> std::vector&lt;TH1D*&gt; <a class="code" href="namespaceHistUtils.html#a383a62e11470b0d24d33f2c464b72f59">extract</a>(TH2D* d,<span class="keyword">const</span> std::string&amp; name,<span class="keywordtype">int</span> alongAxis)</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    std::vector&lt;TH1D*&gt; hists;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// projection along x axis </span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span> ( alongAxis == 1 ) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="comment">//     printf(&quot;HistUtils::extract() loop %i projections\n&quot;,d-&gt;GetNbinsY());</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> ib(1); ib&lt;=d-&gt;GetNbinsY(); ++ib ) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    hists.push_back(d-&gt;ProjectionX(TString::Format(<span class="stringliteral">&quot;%s_%04i&quot;</span>,name.c_str(),ib).Data(),ib,ib,<span class="stringliteral">&quot;e&quot;</span>));</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">return</span> hists;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// distribution along y axis</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">if</span> ( alongAxis == 2 ) {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <span class="comment">//      printf(&quot;HistUtils::extract() loop %i projections\n&quot;,d-&gt;GetNbinsX());</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> ib(1); ib&lt;=d-&gt;GetNbinsX(); ++ib ) { </div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    hists.push_back(d-&gt;ProjectionY(TString::Format(<span class="stringliteral">&quot;%s_%04i&quot;</span>,name.c_str(),ib).Data(),ib,ib,<span class="stringliteral">&quot;e&quot;</span>));</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordflow">return</span> hists;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">// </span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> hists;  </div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// Collect data points into a graph //</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">// Projects along the given axis (1 - x, 2 - y) and extracts requested variable and associated asymmetric errors</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// Returns a TGraphAsymmErrors object holding the graph and the up/down and left/right errors for each point.</span></div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#a9abc1fea2a65fb19bf19bb1be852d7fa">  196</a></span>&#160;  <span class="keyword">static</span> TGraphAsymmErrors* <a class="code" href="namespaceHistUtils.html#a9abc1fea2a65fb19bf19bb1be852d7fa">graph</a>(TH2D* d,<span class="keyword">const</span> std::string&amp; name,<span class="keywordtype">int</span> alongAxis,<a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110">Stats</a> s=<a class="code" href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae57ec394e887bc7762c6476186d7eaf8">Mean</a>)</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    printf(<span class="stringliteral">&quot;graph(...) enter with TH2D* = %p, name = \042%s\042, axis = %i, Stats = %s\n&quot;</span>,</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;       (<span class="keywordtype">void</span>*)d,name.c_str(),alongAxis,<a class="code" href="namespaceHistUtils.html#abdbe4f180f6fd3236fd6f8ceb9166862">lookupStats</a>(s).c_str());</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    std::vector&lt;TH1D*&gt; hists = <a class="code" href="namespaceHistUtils.html#a383a62e11470b0d24d33f2c464b72f59">extract</a>(d,name,alongAxis);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// printf(&quot;graph(...) extracted %i projections...\n&quot;,(int)hists.size());</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    TGraphAsymmErrors* gptr = 0;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> ( hists.empty() ) { <span class="keywordflow">return</span> gptr; }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">int</span> nb(0);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    std::vector&lt;double&gt; x;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    std::vector&lt;double&gt; dxl;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    std::vector&lt;double&gt; dxh;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    std::vector&lt;double&gt; y;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    std::vector&lt;double&gt; dyl;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    std::vector&lt;double&gt; dyh;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">switch</span> ( alongAxis )</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    nb  = d-&gt;GetNbinsY();</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    x   = std::vector&lt;double&gt;(nb,0.);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    dxl = std::vector&lt;double&gt;(nb,0.);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    dxh = std::vector&lt;double&gt;(nb,0.);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    y   = std::vector&lt;double&gt;(nb,0.);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    dyl = std::vector&lt;double&gt;(nb,0.);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    dyh = std::vector&lt;double&gt;(nb,0.);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i(1); i&lt;=nb; ++i ) { </div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <a class="code" href="namespaceHistUtils.html#a75d5e50c598254d5415d2b2e1919eae9">stats</a>(hists.at(i-1),y[i-1],dyl[i-1],dyh[i-1],s);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      x[i-1]   = d-&gt;GetYaxis()-&gt;GetBinCenter(i);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      dxl[i-1] = d-&gt;GetYaxis()-&gt;GetBinWidth(i)/2.;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      dxh[i-1] = dxl[i-1];</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    } </div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    gptr = <span class="keyword">new</span> TGraphAsymmErrors(nb,&amp;x[0],&amp;y[0],&amp;dxl[0],&amp;dxh[0],&amp;dyl[0],&amp;dyh[0]);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    nb  = d-&gt;GetNbinsX();</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    x   = std::vector&lt;double&gt;(nb,0.);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    dxl = std::vector&lt;double&gt;(nb,0.);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    dxh = std::vector&lt;double&gt;(nb,0.);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    y   = std::vector&lt;double&gt;(nb,0.);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    dyl = std::vector&lt;double&gt;(nb,0.);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    dyh = std::vector&lt;double&gt;(nb,0.);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i(1); i&lt;=nb; ++i ) { </div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="namespaceHistUtils.html#a75d5e50c598254d5415d2b2e1919eae9">stats</a>(hists.at(i-1),y[i-1],dyl[i-1],dyh[i-1],s);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      x[i-1]   = d-&gt;GetXaxis()-&gt;GetBinCenter(i);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      dxl[i-1] = d-&gt;GetXaxis()-&gt;GetBinWidth(i)/2.;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      dxh[i-1] = dxl[i-1];</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    } </div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    gptr = <span class="keyword">new</span> TGraphAsymmErrors(nb,&amp;x[0],&amp;y[0],&amp;dxl[0],&amp;dxh[0],&amp;dyl[0],&amp;dyh[0]);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">return</span> gptr;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// Integrate/scale 2-dims //</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">// Scales entries in 2-dim histogram by factor given in &quot;scale&quot; </span></div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#ad08060ea4a76cdf48a806c40b4374954">  257</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceHistUtils.html#ad08060ea4a76cdf48a806c40b4374954">scale2D</a>(TH2D* h,<span class="keywordtype">double</span> scale)</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i(1); i&lt;h-&gt;GetNbinsX(); ++i ) { </div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j(1); j&lt;h-&gt;GetNbinsY(); ++j ) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordtype">int</span> k = h-&gt;GetBin(i,j);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordtype">double</span> y(h-&gt;GetBinContent(k));</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">double</span> dy(h-&gt;GetBinError(k));</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    y *= scale; dy *= scale;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    h-&gt;SetBinContent(k,y);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    h-&gt;SetBinError(k,dy);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  } </div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#ab479dbe64897488a53c190bf8eba173c">  273</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="namespaceHistUtils.html#ab479dbe64897488a53c190bf8eba173c">printDir</a> = <span class="stringliteral">&quot;./pdf&quot;</span>;</div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#acb065721325221957da36e6ac87c0062">  274</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> std::string <a class="code" href="namespaceHistUtils.html#acb065721325221957da36e6ac87c0062">printExt</a> = <span class="stringliteral">&quot;pdf&quot;</span>;</div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#a58dcc08a0178093c596c86b8b99b5f8d">  275</a></span>&#160;  <span class="keyword">static</span> std::string <a class="code" href="namespaceHistUtils.html#a58dcc08a0178093c596c86b8b99b5f8d">printFile</a>(<span class="keyword">const</span> std::string&amp; pre,<span class="keyword">const</span> std::string&amp; post,<span class="keyword">const</span> std::string&amp; ext=printExt)</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  { <span class="keywordflow">return</span> printDir+<span class="stringliteral">&quot;/&quot;</span>+pre+<span class="stringliteral">&quot;_&quot;</span>+post+<span class="stringliteral">&quot;.&quot;</span>+ext; }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#af92ee23ad35cba919099610d716bbb93">  278</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="namespaceHistUtils.html#af92ee23ad35cba919099610d716bbb93">mean</a>(TGraph* gr,<span class="keywordtype">double</span> xmin,<span class="keywordtype">double</span> xmax)</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> ( gr == 0 )  { <span class="keywordflow">return</span> 0.; }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordtype">double</span>* xval = gr-&gt;GetX();</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordtype">double</span>* yval = gr-&gt;GetY();</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="namespaceHistUtils.html#af92ee23ad35cba919099610d716bbb93">mean</a>(0.); <span class="keywordtype">int</span> nctr(0);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i(0); i&lt;gr-&gt;GetN(); ++i ) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">if</span> ( xval[i]&gt;xmin &amp;&amp; xval[i]&lt;xmax ) { mean += yval[i]; ++nctr; }</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">return</span> nctr &gt; 0 ? mean/((double)nctr) : 0.;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#a7c2fb7126abd490e2b35d9f0da8e334b">  290</a></span>&#160;  <span class="keyword">static</span> std::string <a class="code" href="namespaceHistUtils.html#a7c2fb7126abd490e2b35d9f0da8e334b">formStr</a>(<span class="keyword">const</span> std::string&amp; dirn,<span class="keyword">const</span> std::string&amp; pref,<span class="keyword">const</span> std::string&amp; tag)</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  { <span class="keywordflow">return</span> dirn != <span class="stringliteral">&quot;&quot;</span> </div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      ? std::string(TString::Format(<span class="stringliteral">&quot;%s/%s_%s&quot;</span>,dirn.c_str(),pref.c_str(),tag.c_str()).Data())</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      :  std::string(TString::Format(<span class="stringliteral">&quot;%s_%s&quot;</span>,pref.c_str(),tag.c_str()).Data()); }</div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#a278ca8855cbfe4846e64ea99c1071d87">  294</a></span>&#160;  <span class="keyword">static</span> std::string <a class="code" href="namespaceHistUtils.html#a7c2fb7126abd490e2b35d9f0da8e334b">formStr</a>(<span class="keyword">const</span> std::string&amp; dirn,<span class="keyword">const</span> std::string&amp; pref,<span class="keyword">const</span> std::string&amp; tag,<span class="keyword">const</span> std::string&amp; postf)</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  { <span class="keywordflow">return</span> std::string(TString::Format(<span class="stringliteral">&quot;%s_%s&quot;</span>,<a class="code" href="namespaceHistUtils.html#a7c2fb7126abd490e2b35d9f0da8e334b">formStr</a>(dirn,pref,tag).c_str(),postf.c_str()).Data()); }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="namespaceHistUtils.html#a5b9e3c8e95d0626bd82c113eaf0ff84d">  297</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespaceHistUtils.html#a5b9e3c8e95d0626bd82c113eaf0ff84d">drawCaloBounds</a>(<span class="keywordtype">double</span> ymin,<span class="keywordtype">double</span> ymax,<span class="keywordtype">int</span> ndc) </div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keyword">static</span> std::vector&lt;double&gt;      _bounds  = { -4.9, -3.2, -2.5, -1.475, 1.475, 2.5, 3.2, 4.9 };</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keyword">static</span> std::vector&lt;std::string&gt; _calos   = { <span class="stringliteral">&quot;FCal&quot;</span>, <span class="stringliteral">&quot;EC coarse&quot;</span>, <span class="stringliteral">&quot;EC fine&quot;</span>, <span class="stringliteral">&quot;Central fine&quot;</span>, <span class="stringliteral">&quot;EC fine&quot;</span>, <span class="stringliteral">&quot;EC coarse&quot;</span>, <span class="stringliteral">&quot;FCal&quot;</span> };</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keyword">static</span> std::vector&lt;int&gt;         _bgcolor = { kYellow-10, kGreen-10, kCyan-10, kWhite, kCyan-10, kGreen-10, kYellow-10 };  </div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keyword">static</span> std::vector&lt;int&gt;         _txcolor = { kRed,       kGreen+3,  kBlue,    kBlack, kBlue,    kGreen+3,  kRed       };  </div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span>                     _palette[100];</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">double</span>                  _r[] = { 0.00, 0.00, 0.50, 1.00 };</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">double</span>                  _g[] = { 1.00, 0.50, 0.00, 0.00 };</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">double</span>                  _b[] = { 0.00, 0.50, 0.50, 0.00 };</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">double</span>                  _s[] = { 0.00, 0.33, 0.66, 1.00 };</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordtype">int</span> fi = TColor::CreateGradientColorTable(4,_s,_r,_g,_b,4);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> k(0); k&lt;4;++k )</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      {}</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> i(1); i&lt;_bounds.size(); ++i ) {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="comment">// draw the boundary</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="comment">//      if ( i &lt; _bounds.size() ) { </span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// TLine* l = new TLine(_bounds.at(i),ymin,_bounds.at(i),ymax);</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// l-&gt;SetLineWidth(2);</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="comment">// l-&gt;SetLineStyle(1);</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="comment">// l-&gt;SetLineColor(kGray);</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">// l-&gt;Draw(&quot;same&quot;);</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    TBox* b = <span class="keyword">new</span> TBox(_bounds.at(i-1),ymin,_bounds.at(i),ymax);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    b-&gt;SetFillColor(_bgcolor.at(i-1));</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    b-&gt;SetLineColor(0);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    b-&gt;SetLineWidth(0);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    b-&gt;Draw(<span class="stringliteral">&quot;same&quot;</span>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">//  printf(&quot;HistUtils::drawCaloBounds - boundary of calo \042%s\042: (%5.2f,%5.2f)-(%5.2f,%5.2f), color code %i\n&quot;,_calos.at(i-1).c_str(),_bounds.at(i-1),ymin,_bounds.at(i),ymax,_bgcolor.at(i-1));</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">//      }</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    TLatex tl;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    tl.SetTextAlign(23);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    tl.SetTextSize(0.65*tl.GetTextSize());</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordtype">double</span> yt(0.925*ymax);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordtype">double</span> ty(0.85*ymax);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> i(1); i&lt;_bounds.size(); ++i ) { </div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="comment">// </span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordtype">double</span> xt((_bounds.at(i-1)+_bounds.at(i))/2.);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="comment">//      printf(&quot;HistUtils::drawCaloBounds - boundary of calo \042%s\042: (%5.2f,%5.2f)-(%5.2f,%5.2f), center (%5.2f,%5.2f)\n&quot;,_calos.at(i-1).c_str(),_bounds.at(i-1),ymin,_bounds.at(i),ymax,xt,yt);</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      tl.SetTextColor(_txcolor.at(i-1));</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">if</span> ( i % 2 == 0 ) { tl.DrawLatex(xt,yt,_calos.at(i-1).c_str()); } <span class="keywordflow">else</span> { tl.DrawLatex(xt,ty,_calos.at(i-1).c_str()); }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="namespaceHistUtils_html_a5b9e3c8e95d0626bd82c113eaf0ff84d"><div class="ttname"><a href="namespaceHistUtils.html#a5b9e3c8e95d0626bd82c113eaf0ff84d">HistUtils::drawCaloBounds</a></div><div class="ttdeci">static void drawCaloBounds(double ymin, double ymax, int ndc)</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00297">HistUtils.h:297</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_ab479dbe64897488a53c190bf8eba173c"><div class="ttname"><a href="namespaceHistUtils.html#ab479dbe64897488a53c190bf8eba173c">HistUtils::printDir</a></div><div class="ttdeci">static const std::string printDir</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00273">HistUtils.h:273</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_abdbe4f180f6fd3236fd6f8ceb9166862"><div class="ttname"><a href="namespaceHistUtils.html#abdbe4f180f6fd3236fd6f8ceb9166862">HistUtils::lookupStats</a></div><div class="ttdeci">static const std::string &amp; lookupStats(Stats s)</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00055">HistUtils.h:55</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_a58dcc08a0178093c596c86b8b99b5f8d"><div class="ttname"><a href="namespaceHistUtils.html#a58dcc08a0178093c596c86b8b99b5f8d">HistUtils::printFile</a></div><div class="ttdeci">static std::string printFile(const std::string &amp;pre, const std::string &amp;post, const std::string &amp;ext=printExt)</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00275">HistUtils.h:275</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_acb065721325221957da36e6ac87c0062"><div class="ttname"><a href="namespaceHistUtils.html#acb065721325221957da36e6ac87c0062">HistUtils::printExt</a></div><div class="ttdeci">static const std::string printExt</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00274">HistUtils.h:274</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_ad08060ea4a76cdf48a806c40b4374954"><div class="ttname"><a href="namespaceHistUtils.html#ad08060ea4a76cdf48a806c40b4374954">HistUtils::scale2D</a></div><div class="ttdeci">static bool scale2D(TH2D *h, double scale)</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00257">HistUtils.h:257</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_af92ee23ad35cba919099610d716bbb93"><div class="ttname"><a href="namespaceHistUtils.html#af92ee23ad35cba919099610d716bbb93">HistUtils::mean</a></div><div class="ttdeci">static double mean(TGraph *gr, double xmin, double xmax)</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00278">HistUtils.h:278</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_aee957b08165ec79d9ab22d3985938110ae57ec394e887bc7762c6476186d7eaf8"><div class="ttname"><a href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae57ec394e887bc7762c6476186d7eaf8">HistUtils::Mean</a></div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00033">HistUtils.h:33</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_a9abc1fea2a65fb19bf19bb1be852d7fa"><div class="ttname"><a href="namespaceHistUtils.html#a9abc1fea2a65fb19bf19bb1be852d7fa">HistUtils::graph</a></div><div class="ttdeci">static TGraphAsymmErrors * graph(TH2D *d, const std::string &amp;name, int alongAxis, Stats s=Mean)</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00196">HistUtils.h:196</a></div></div>
<div class="ttc" id="namespaceHistUtils_html"><div class="ttname"><a href="namespaceHistUtils.html">HistUtils</a></div><div class="ttdoc">Histogram utilities. </div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00027">HistUtils.h:27</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_aa3bb9be93085f86cfa38e98f525f525b"><div class="ttname"><a href="namespaceHistUtils.html#aa3bb9be93085f86cfa38e98f525f525b">HistUtils::stats_lu</a></div><div class="ttdeci">static std::map&lt; int, std::string &gt; stats_lu</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00039">HistUtils.h:39</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_a383a62e11470b0d24d33f2c464b72f59"><div class="ttname"><a href="namespaceHistUtils.html#a383a62e11470b0d24d33f2c464b72f59">HistUtils::extract</a></div><div class="ttdeci">static std::vector&lt; TH1D * &gt; extract(TH2D *d, const std::string &amp;name, int alongAxis)</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00167">HistUtils.h:167</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_aee957b08165ec79d9ab22d3985938110ae0759b6d55043d68f3704e920af7c8a1"><div class="ttname"><a href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110ae0759b6d55043d68f3704e920af7c8a1">HistUtils::Unknown</a></div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00033">HistUtils.h:33</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_aee957b08165ec79d9ab22d3985938110"><div class="ttname"><a href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110">HistUtils::Stats</a></div><div class="ttdeci">Stats</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00033">HistUtils.h:33</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_a75d5e50c598254d5415d2b2e1919eae9"><div class="ttname"><a href="namespaceHistUtils.html#a75d5e50c598254d5415d2b2e1919eae9">HistUtils::stats</a></div><div class="ttdeci">static bool stats(TH1D *h, double &amp;m, double &amp;dm, Stats s=Mean)</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00069">HistUtils.h:69</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_a7c2fb7126abd490e2b35d9f0da8e334b"><div class="ttname"><a href="namespaceHistUtils.html#a7c2fb7126abd490e2b35d9f0da8e334b">HistUtils::formStr</a></div><div class="ttdeci">static std::string formStr(const std::string &amp;dirn, const std::string &amp;pref, const std::string &amp;tag)</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00290">HistUtils.h:290</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_aee957b08165ec79d9ab22d3985938110a1058d6eb74658ec382948203fe444f2e"><div class="ttname"><a href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110a1058d6eb74658ec382948203fe444f2e">HistUtils::RMS</a></div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00033">HistUtils.h:33</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_aee957b08165ec79d9ab22d3985938110abf140a74893a9708698f76a4ee416789"><div class="ttname"><a href="namespaceHistUtils.html#aee957b08165ec79d9ab22d3985938110abf140a74893a9708698f76a4ee416789">HistUtils::Median</a></div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00033">HistUtils.h:33</a></div></div>
<div class="ttc" id="namespaceHistUtils_html_a763ef83bda6c72effba6b89023f6ed51"><div class="ttname"><a href="namespaceHistUtils.html#a763ef83bda6c72effba6b89023f6ed51">HistUtils::fstats</a></div><div class="ttdeci">static const std::map&lt; int, std::string &gt; &amp; fstats()</div><div class="ttdef"><b>Definition:</b> <a href="HistUtils_8h_source.html#l00040">HistUtils.h:40</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu May 10 2018 10:10:36 for Core Histogram Helpers by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
